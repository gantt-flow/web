{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 5, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Jos%C3%A9%20Luis%20CS/Documents/Modular/proyecto%202025B/Versiones/2.1/web/client/src/components/ui/DataTable.tsx"],"sourcesContent":["import { FC } from 'react';\r\n\r\ninterface Column {\r\n  key: string;\r\n  header: string;\r\n  width?: string;\r\n  // Añade esta nueva propiedad\r\n  render?: (value: any) => React.ReactNode;\r\n}\r\n\r\ninterface DataTableProps {\r\n  columns: Column[];\r\n  data: any[];\r\n  onEdit?: (id: string) => void;\r\n  onDelete?: (id: string) => void;\r\n  isLoading?: boolean;\r\n}\r\n\r\nexport const DataTable: FC<DataTableProps> = ({\r\n  columns,\r\n  data,\r\n  onEdit,\r\n  onDelete,\r\n  isLoading = false,\r\n}) => {\r\n  if (isLoading) return <div>Cargando...</div>;\r\n\r\n  return (\r\n    <div className=\"overflow-x-auto bg-white rounded-lg shadow\">\r\n      <table className=\"min-w-full divide-y divide-gray-200\">\r\n        <thead className=\"bg-gray-50\">\r\n          <tr>\r\n            {columns.map((column) => (\r\n              <th\r\n                key={column.key}\r\n                scope=\"col\"\r\n                className={`px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider ${column.width || ''}`}\r\n              >\r\n                {column.header}\r\n              </th>\r\n            ))}\r\n            {(onEdit || onDelete) && (\r\n              <th scope=\"col\" className=\"px-6 py-3 text-right\">\r\n                Acciones\r\n              </th>\r\n            )}\r\n          </tr>\r\n        </thead>\r\n        <tbody className=\"bg-white divide-y divide-gray-200\">\r\n          {data.map((item, index) => (\r\n            <tr key={index} className=\"hover:bg-gray-50\">\r\n              {columns.map((column) => (\r\n                <td\r\n                  key={`${index}-${column.key}`}\r\n                  className=\"px-6 py-4 whitespace-nowrap text-sm text-gray-900\"\r\n                >\r\n                  {/* Verifica si existe la función render */}\r\n                  {column.render \r\n                    ? column.render(item[column.key]) \r\n                    : item[column.key]\r\n                  }\r\n                </td>\r\n              ))}\r\n              {(onEdit || onDelete) && (\r\n                <td className=\"px-6 py-4 whitespace-nowrap text-right text-sm font-medium\">\r\n                  {onEdit && (\r\n                    <button\r\n                      onClick={() => onEdit(item._id || item.id)}\r\n                      className=\"mr-3 text-indigo-600 hover:text-indigo-900\"\r\n                    >\r\n                      Editar\r\n                    </button>\r\n                  )}\r\n                  {onDelete && (\r\n                    <button\r\n                      onClick={() => onDelete(item._id || item.id)}\r\n                      className=\"text-red-600 hover:text-red-900\"\r\n                    >\r\n                      Eliminar\r\n                    </button>\r\n                  )}\r\n                </td>\r\n              )}\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  );\r\n};"],"names":[],"mappings":";;;;;AAkBO,MAAM,YAAgC,CAAC,EAC5C,OAAO,EACP,IAAI,EACJ,MAAM,EACN,QAAQ,EACR,YAAY,KAAK,EAClB;IACC,IAAI,WAAW,qBAAO,8OAAC;kBAAI;;;;;;IAE3B,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAM,WAAU;;8BACf,8OAAC;oBAAM,WAAU;8BACf,cAAA,8OAAC;;4BACE,QAAQ,GAAG,CAAC,CAAC,uBACZ,8OAAC;oCAEC,OAAM;oCACN,WAAW,CAAC,+EAA+E,EAAE,OAAO,KAAK,IAAI,IAAI;8CAEhH,OAAO,MAAM;mCAJT,OAAO,GAAG;;;;;4BAOlB,CAAC,UAAU,QAAQ,mBAClB,8OAAC;gCAAG,OAAM;gCAAM,WAAU;0CAAuB;;;;;;;;;;;;;;;;;8BAMvD,8OAAC;oBAAM,WAAU;8BACd,KAAK,GAAG,CAAC,CAAC,MAAM,sBACf,8OAAC;4BAAe,WAAU;;gCACvB,QAAQ,GAAG,CAAC,CAAC,uBACZ,8OAAC;wCAEC,WAAU;kDAGT,OAAO,MAAM,GACV,OAAO,MAAM,CAAC,IAAI,CAAC,OAAO,GAAG,CAAC,IAC9B,IAAI,CAAC,OAAO,GAAG,CAAC;uCANf,GAAG,MAAM,CAAC,EAAE,OAAO,GAAG,EAAE;;;;;gCAUhC,CAAC,UAAU,QAAQ,mBAClB,8OAAC;oCAAG,WAAU;;wCACX,wBACC,8OAAC;4CACC,SAAS,IAAM,OAAO,KAAK,GAAG,IAAI,KAAK,EAAE;4CACzC,WAAU;sDACX;;;;;;wCAIF,0BACC,8OAAC;4CACC,SAAS,IAAM,SAAS,KAAK,GAAG,IAAI,KAAK,EAAE;4CAC3C,WAAU;sDACX;;;;;;;;;;;;;2BA3BA;;;;;;;;;;;;;;;;;;;;;AAuCrB","debugId":null}},
    {"offset": {"line": 123, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Jos%C3%A9%20Luis%20CS/Documents/Modular/proyecto%202025B/Versiones/2.1/web/client/src/components/admin/EditUserModal.tsx"],"sourcesContent":["// components/admin/EditUserModal.tsx\r\n'use client';\r\nimport { useState, useEffect } from 'react';\r\nimport { User } from '@/services/userService';\r\n\r\ninterface EditUserModalProps {\r\n  user: User | null;\r\n  onClose: () => void;\r\n  onSave: (updatedUser: User) => void;\r\n}\r\n\r\nconst EditUserModal = ({ user, onClose, onSave }: EditUserModalProps) => {\r\n  const [formData, setFormData] = useState<User | null>(null);\r\n\r\n  useEffect(() => {\r\n    if (user) {\r\n      setFormData({ ...user });\r\n    }\r\n  }, [user]);\r\n\r\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement>) => {\r\n    if (!formData) return;\r\n    \r\n    const { name, value } = e.target;\r\n    setFormData({\r\n      ...formData,\r\n      [name]: name === 'isActive' ? (value === 'true') : value\r\n    });\r\n  };\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (formData) {\r\n      onSave(formData);\r\n      onClose();\r\n    }\r\n  };\r\n\r\n  if (!user || !formData) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\r\n      <div className=\"bg-white rounded-lg p-6 w-full max-w-md\">\r\n        <h2 className=\"text-xl font-bold mb-4 text-black\">Editar Usuario</h2>\r\n        <form onSubmit={handleSubmit}>\r\n          <div className=\"mb-4\">\r\n            <label className=\"block text-sm font-medium mb-1 text-black\">Nombre</label>\r\n            <input\r\n              type=\"text\"\r\n              name=\"name\"\r\n              value={formData.name}\r\n              onChange={handleChange}\r\n              className=\"w-full p-2 border rounded text-black\"\r\n              required\r\n            />\r\n          </div>\r\n          \r\n          <div className=\"mb-4\">\r\n            <label className=\"block text-sm font-medium mb-1 text-black\">Email</label>\r\n            <input\r\n              type=\"email\"\r\n              name=\"email\"\r\n              value={formData.email}\r\n              onChange={handleChange}\r\n              className=\"w-full p-2 border rounded text-black\"\r\n              required\r\n              disabled\r\n            />\r\n          </div>\r\n          \r\n          <div className=\"mb-4\">\r\n            <label className=\"block text-sm font-medium mb-1 text-black\">Rol</label>\r\n            <select\r\n              name=\"role\"\r\n              value={formData.role}\r\n              onChange={handleChange}\r\n              className=\"w-full p-2 border rounded text-black\"\r\n              required\r\n            >\r\n              <option value=\"Administrador de proyectos\" className=\"text-black\">Administrador</option>\r\n              <option value=\"Miembro de equipo\" className=\"text-black\">Miembro</option>\r\n              <option value=\"Colaborador\"className=\"text-black\">Colaborador</option>\r\n              <option value=\"Cliente\" className=\"text-black\">Cliente</option>\r\n              <option value=\"Auditor\" className=\"text-black\">Auditor</option>\r\n            </select>\r\n          </div>\r\n          \r\n          <div className=\"mb-4\">\r\n            <label className=\"block text-sm font-medium mb-1 text-black\">Estado</label>\r\n            <select\r\n              name=\"isActive\"\r\n              value={String(formData.isActive)}\r\n              onChange={handleChange}\r\n              className=\"w-full p-2 border rounded text-black\"\r\n              required\r\n            >\r\n              <option value=\"true\" className=\"text-black\">Activo</option>\r\n              <option value=\"false\" className=\"text-black\">Inactivo</option>\r\n            </select>\r\n          </div>\r\n          \r\n          <div className=\"flex justify-end gap-2\">\r\n            <button\r\n              type=\"button\"\r\n              onClick={onClose}\r\n              className=\"px-4 py-2 text-black hover:bg-gray-100 rounded\"\r\n            >\r\n              Cancelar\r\n            </button>\r\n            <button\r\n              type=\"submit\"\r\n              className=\"px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700\"\r\n            >\r\n              Guardar\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default EditUserModal;"],"names":[],"mappings":"AAAA,qCAAqC;;;;;AAErC;AADA;;;AAUA,MAAM,gBAAgB,CAAC,EAAE,IAAI,EAAE,OAAO,EAAE,MAAM,EAAsB;IAClE,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAe;IAEtD,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,IAAI,MAAM;YACR,YAAY;gBAAE,GAAG,IAAI;YAAC;QACxB;IACF,GAAG;QAAC;KAAK;IAET,MAAM,eAAe,CAAC;QACpB,IAAI,CAAC,UAAU;QAEf,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,EAAE,MAAM;QAChC,YAAY;YACV,GAAG,QAAQ;YACX,CAAC,KAAK,EAAE,SAAS,aAAc,UAAU,SAAU;QACrD;IACF;IAEA,MAAM,eAAe,OAAO;QAC1B,EAAE,cAAc;QAChB,IAAI,UAAU;YACZ,OAAO;YACP;QACF;IACF;IAEA,IAAI,CAAC,QAAQ,CAAC,UAAU,OAAO;IAE/B,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBAAG,WAAU;8BAAoC;;;;;;8BAClD,8OAAC;oBAAK,UAAU;;sCACd,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAM,WAAU;8CAA4C;;;;;;8CAC7D,8OAAC;oCACC,MAAK;oCACL,MAAK;oCACL,OAAO,SAAS,IAAI;oCACpB,UAAU;oCACV,WAAU;oCACV,QAAQ;;;;;;;;;;;;sCAIZ,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAM,WAAU;8CAA4C;;;;;;8CAC7D,8OAAC;oCACC,MAAK;oCACL,MAAK;oCACL,OAAO,SAAS,KAAK;oCACrB,UAAU;oCACV,WAAU;oCACV,QAAQ;oCACR,QAAQ;;;;;;;;;;;;sCAIZ,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAM,WAAU;8CAA4C;;;;;;8CAC7D,8OAAC;oCACC,MAAK;oCACL,OAAO,SAAS,IAAI;oCACpB,UAAU;oCACV,WAAU;oCACV,QAAQ;;sDAER,8OAAC;4CAAO,OAAM;4CAA6B,WAAU;sDAAa;;;;;;sDAClE,8OAAC;4CAAO,OAAM;4CAAoB,WAAU;sDAAa;;;;;;sDACzD,8OAAC;4CAAO,OAAM;4CAAa,WAAU;sDAAa;;;;;;sDAClD,8OAAC;4CAAO,OAAM;4CAAU,WAAU;sDAAa;;;;;;sDAC/C,8OAAC;4CAAO,OAAM;4CAAU,WAAU;sDAAa;;;;;;;;;;;;;;;;;;sCAInD,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAM,WAAU;8CAA4C;;;;;;8CAC7D,8OAAC;oCACC,MAAK;oCACL,OAAO,OAAO,SAAS,QAAQ;oCAC/B,UAAU;oCACV,WAAU;oCACV,QAAQ;;sDAER,8OAAC;4CAAO,OAAM;4CAAO,WAAU;sDAAa;;;;;;sDAC5C,8OAAC;4CAAO,OAAM;4CAAQ,WAAU;sDAAa;;;;;;;;;;;;;;;;;;sCAIjD,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCACC,MAAK;oCACL,SAAS;oCACT,WAAU;8CACX;;;;;;8CAGD,8OAAC;oCACC,MAAK;oCACL,WAAU;8CACX;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQb;uCAEe","debugId":null}},
    {"offset": {"line": 408, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Jos%C3%A9%20Luis%20CS/Documents/Modular/proyecto%202025B/Versiones/2.1/web/client/src/components/admin/CreateUserModal.tsx"],"sourcesContent":["// components/admin/CreateUserModal.tsx\r\n'use client';\r\nimport { useState } from 'react';\r\nimport { User } from '@/services/userService';\r\n\r\ninterface CreateUserModalProps {\r\n  onClose: () => void;\r\n  onCreate: (newUser: Partial<User>) => void; // Cambia el tipo aquí\r\n}\r\n\r\nconst CreateUserModal = ({ onClose, onCreate }: CreateUserModalProps) => {\r\n  // Estado con todas las propiedades necesarias\r\n  const [formData, setFormData] = useState<Partial<User>>({\r\n    name: '',\r\n    email: '',\r\n    password: '', // Campo para la contraseña\r\n    role: 'Miembro de equipo',\r\n    isActive: true,\r\n    profilePicture: 'default-profile.png',\r\n    notifications: true,\r\n    theme: 'system',\r\n    readOnly: false,\r\n    auditLogAccess: false\r\n  });\r\n\r\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement>) => {\r\n    const { name, value } = e.target;\r\n    \r\n    setFormData(prev => ({\r\n      ...prev,\r\n      [name]: name === 'isActive' || name === 'notifications' \r\n        ? (value === 'true') \r\n        : value\r\n    }));\r\n  };\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    if (!formData.name || !formData.email || !formData.password) {\r\n      alert('Por favor complete todos los campos requeridos');\r\n      return;\r\n    }\r\n    \r\n    onCreate(formData);\r\n    onClose();\r\n  };\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\r\n      <div className=\"bg-white rounded-lg p-6 w-full max-w-md\">\r\n        <h2 className=\"text-xl font-bold mb-4 text-black\">Crear Nuevo Usuario</h2>\r\n        <form onSubmit={handleSubmit}>\r\n          <div className=\"mb-4\">\r\n            <label className=\"block text-sm font-medium mb-1 text-black\">Nombre*</label>\r\n            <input\r\n              type=\"text\"\r\n              name=\"name\"\r\n              value={formData.name || ''}\r\n              onChange={handleChange}\r\n              className=\"w-full p-2 border rounded text-black\"\r\n              required\r\n            />\r\n          </div>\r\n          \r\n          <div className=\"mb-4\">\r\n            <label className=\"block text-sm font-medium mb-1 text-black\">Email*</label>\r\n            <input\r\n              type=\"email\"\r\n              name=\"email\"\r\n              value={formData.email || ''}\r\n              onChange={handleChange}\r\n              className=\"w-full p-2 border rounded text-black\"\r\n              required\r\n            />\r\n          </div>\r\n          \r\n          <div className=\"mb-4\">\r\n            <label className=\"block text-sm font-medium mb-1 text-black\">Contraseña*</label>\r\n            <input\r\n              type=\"password\"\r\n              name=\"password\"\r\n              value={formData.password || ''}\r\n              onChange={handleChange}\r\n              className=\"w-full p-2 border rounded text-black\"\r\n              required\r\n            />\r\n          </div>\r\n          \r\n          <div className=\"mb-4\">\r\n            <label className=\"block text-sm font-medium mb-1 text-black\">Rol*</label>\r\n            <select\r\n              name=\"role\"\r\n              value={formData.role || ''}\r\n              onChange={handleChange}\r\n              className=\"w-full p-2 border rounded text-black\"\r\n              required\r\n            >\r\n              <option value=\"Administrador de proyectos\">Administrador</option>\r\n              <option value=\"Miembro de equipo\">Miembro</option>\r\n              <option value=\"Colaborador\">Colaborador</option>\r\n              <option value=\"Cliente\">Cliente</option>\r\n              <option value=\"Auditor\">Auditor</option>\r\n            </select>\r\n          </div>\r\n          \r\n          <div className=\"mb-4\">\r\n            <label className=\"block text-sm font-medium mb-1 text-black\">Estado</label>\r\n            <select\r\n              name=\"isActive\"\r\n              value={String(formData.isActive)}\r\n              onChange={handleChange}\r\n              className=\"w-full p-2 border rounded text-black\"\r\n            >\r\n              <option value=\"true\">Activo</option>\r\n              <option value=\"false\">Inactivo</option>\r\n            </select>\r\n          </div>\r\n          \r\n          <div className=\"mb-4\">\r\n            <label className=\"block text-sm font-medium mb-1 text-black\">Notificaciones</label>\r\n            <select\r\n              name=\"notifications\"\r\n              value={String(formData.notifications)}\r\n              onChange={handleChange}\r\n              className=\"w-full p-2 border rounded text-black\"\r\n            >\r\n              <option value=\"true\">Activadas</option>\r\n              <option value=\"false\">Desactivadas</option>\r\n            </select>\r\n          </div>\r\n          \r\n          <div className=\"mb-4\">\r\n            <label className=\"block text-sm font-medium mb-1 text-black\">Tema</label>\r\n            <select\r\n              name=\"theme\"\r\n              value={formData.theme || ''}\r\n              onChange={handleChange}\r\n              className=\"w-full p-2 border rounded text-black\"\r\n            >\r\n              <option value=\"system\">Sistema</option>\r\n              <option value=\"light\">Claro</option>\r\n              <option value=\"dark\">Oscuro</option>\r\n            </select>\r\n          </div>\r\n          \r\n          <div className=\"flex justify-end gap-2\">\r\n            <button\r\n              type=\"button\"\r\n              onClick={onClose}\r\n              className=\"px-4 py-2 text-black hover:bg-gray-100 rounded\"\r\n            >\r\n              Cancelar\r\n            </button>\r\n            <button\r\n              type=\"submit\"\r\n              className=\"px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700\"\r\n            >\r\n              Crear\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CreateUserModal;"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 918, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Jos%C3%A9%20Luis%20CS/Documents/Modular/proyecto%202025B/Versiones/2.1/web/client/src/services/api.tsx"],"sourcesContent":["'use client';\n\nimport axios from 'axios';\n\n// Variable definida en .env.local\nconst baseURL = process.env.NEXT_PUBLIC_BACKEND_URL;\n\nif (!baseURL) {\n  throw new Error('La variable de entorno NEXT_PUBLIC_BACKEND_URL no está definida.');\n}\n\n// Crea una instancia de Axios con una configuración base\nconst api = axios.create({\n  baseURL: baseURL,\n  headers: {\n    'Content-Type': 'application/json',\n  },\n  withCredentials: true\n});\n\nexport default api;"],"names":[],"mappings":";;;AAEA;AAFA;;AAIA,kCAAkC;AAClC,MAAM;AAEN;;AAIA,yDAAyD;AACzD,MAAM,MAAM,qIAAA,CAAA,UAAK,CAAC,MAAM,CAAC;IACvB,SAAS;IACT,SAAS;QACP,gBAAgB;IAClB;IACA,iBAAiB;AACnB;uCAEe","debugId":null}},
    {"offset": {"line": 941, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Jos%C3%A9%20Luis%20CS/Documents/Modular/proyecto%202025B/Versiones/2.1/web/client/src/services/userService.tsx"],"sourcesContent":["import api from '@/services/api';\n\n// Definimos los tipos de datos que esperamos para una mejor seguridad y autocompletado\nexport interface User {\n  isActive: true;\n  _id: string;\n  name: string;\n  email: string;\n  role: string;\n  password?: string; // Campo para creación\n  profilePicture?: string;\n  notifications?: boolean;\n  theme?: string;\n  readOnly?: boolean;\n  auditLogAccess?: boolean;\n  // ... cualquier otro campo del usuario\n}\n\nexport interface NewUser {\n    name: string;\n    email: string;\n}\n\n/**\n * Obtiene la lista de todos los usuarios\n * @returns Un array de usuarios\n */\nexport const getAllUsers = async (): Promise<User[]> => {\n  try {\n    const response = await api.get<User[]>('/users');\n    return response.data;\n  } catch (error) {\n    console.error(\"Error al obtener los usuarios:\", error);\n    throw error;\n  }\n};\n\n/**\n * Obtiene un usuario por su ID\n * @param userId El ID del usuario\n * @returns El objeto del usuario\n */\nexport const getUserById = async (userId: string): Promise<User> => {\n  try {\n    const response = await api.get<User>(`/users/${userId}`);\n    return response.data;\n  } catch (error) {\n    console.error(`Error al obtener el usuario ${userId}:`, error);\n    throw error;\n  }\n};\n\n/**\n * Crea un nuevo usuario\n * @param newUser Los datos del nuevo usuario\n * @returns El objeto del usuario creado\n */\nexport const createUser = async (newUser: NewUser): Promise<User> => {\n  try {\n    const response = await api.post<User>('/users', newUser);\n    return response.data;\n  } catch (error) {\n    console.error(\"Error al crear el usuario:\", error);\n    throw error;\n  }\n};\n\nexport const createUserAdmin = async (newUser: NewUser): Promise<User> => {\n  try {\n    const response = await api.post<User>('/admin', newUser);\n    return response.data;\n  } catch (error) {\n    console.error(\"Error al crear el usuario:\", error);\n    throw error;\n  }\n};\n\nexport const updateUser = async (userId: string, userData: Partial<User>): Promise<User> => {\n  try {\n    const response = await api.put<User>(`/users/${userId}`, userData);\n    return response.data;\n  } catch (error) {\n    console.error(`Error updating user ${userId}:`, error);\n    throw error;\n  }\n};\n\nexport const deleteUser = async (userId: string): Promise<void> => {\n  try {\n    await api.delete(`/users/${userId}`);\n  } catch (error) {\n    console.error(`Error deleting user ${userId}:`, error);\n    throw error;\n  }\n};"],"names":[],"mappings":";;;;;;;;AAAA;;AA2BO,MAAM,cAAc;IACzB,IAAI;QACF,MAAM,WAAW,MAAM,uHAAA,CAAA,UAAG,CAAC,GAAG,CAAS;QACvC,OAAO,SAAS,IAAI;IACtB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,kCAAkC;QAChD,MAAM;IACR;AACF;AAOO,MAAM,cAAc,OAAO;IAChC,IAAI;QACF,MAAM,WAAW,MAAM,uHAAA,CAAA,UAAG,CAAC,GAAG,CAAO,CAAC,OAAO,EAAE,QAAQ;QACvD,OAAO,SAAS,IAAI;IACtB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,CAAC,4BAA4B,EAAE,OAAO,CAAC,CAAC,EAAE;QACxD,MAAM;IACR;AACF;AAOO,MAAM,aAAa,OAAO;IAC/B,IAAI;QACF,MAAM,WAAW,MAAM,uHAAA,CAAA,UAAG,CAAC,IAAI,CAAO,UAAU;QAChD,OAAO,SAAS,IAAI;IACtB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,8BAA8B;QAC5C,MAAM;IACR;AACF;AAEO,MAAM,kBAAkB,OAAO;IACpC,IAAI;QACF,MAAM,WAAW,MAAM,uHAAA,CAAA,UAAG,CAAC,IAAI,CAAO,UAAU;QAChD,OAAO,SAAS,IAAI;IACtB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,8BAA8B;QAC5C,MAAM;IACR;AACF;AAEO,MAAM,aAAa,OAAO,QAAgB;IAC/C,IAAI;QACF,MAAM,WAAW,MAAM,uHAAA,CAAA,UAAG,CAAC,GAAG,CAAO,CAAC,OAAO,EAAE,QAAQ,EAAE;QACzD,OAAO,SAAS,IAAI;IACtB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,CAAC,oBAAoB,EAAE,OAAO,CAAC,CAAC,EAAE;QAChD,MAAM;IACR;AACF;AAEO,MAAM,aAAa,OAAO;IAC/B,IAAI;QACF,MAAM,uHAAA,CAAA,UAAG,CAAC,MAAM,CAAC,CAAC,OAAO,EAAE,QAAQ;IACrC,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,CAAC,oBAAoB,EAAE,OAAO,CAAC,CAAC,EAAE;QAChD,MAAM;IACR;AACF","debugId":null}},
    {"offset": {"line": 1008, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Jos%C3%A9%20Luis%20CS/Documents/Modular/proyecto%202025B/Versiones/2.1/web/client/src/app/admin/usuarios/page.tsx"],"sourcesContent":["// app/admin/usuarios/page.tsx\r\n'use client';\r\nimport { useState, useEffect } from 'react';\r\nimport { DataTable } from '@/components/ui/DataTable';\r\nimport EditUserModal from '@/components/admin/EditUserModal';\r\nimport CreateUserModal from '@/components/admin/CreateUserModal';\r\nimport { User, getAllUsers, deleteUser, updateUser, createUserAdmin } from '@/services/userService';\r\n\r\ninterface NewUser {\r\n  name: string;\r\n  email: string;\r\n  password: string;\r\n  role: string;\r\n  isActive: boolean;\r\n  profilePicture?: string;\r\n  notifications?: boolean;\r\n  theme?: string;\r\n  readOnly?: boolean;\r\n  auditLogAccess?: boolean;\r\n}\r\n\r\nexport default function DashboardLayoutAdmin() {\r\n  const [users, setUsers] = useState<User[]>([]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [editingUser, setEditingUser] = useState<User | null>(null);\r\n  const [isCreateModalOpen, setIsCreateModalOpen] = useState(false); // Estado para controlar el modal de creación\r\n\r\n  // Fetch users al cargar el componente\r\n  useEffect(() => {\r\n    const fetchUsers = async () => {\r\n      try {\r\n        const data = await getAllUsers();\r\n        setUsers(data);\r\n      } catch (error) {\r\n        console.error('Error fetching users:', error);\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n    fetchUsers();\r\n  }, []);\r\n\r\n  // Handler para eliminar usuario\r\n  const handleDelete = async (userId: string) => {\r\n    if (confirm('¿Estás seguro de eliminar este usuario?')) {\r\n      await deleteUser(userId);\r\n      setUsers(users.filter((user) => user._id !== userId));\r\n    }\r\n  };\r\n\r\n  // Handler para guardar cambios en usuario\r\n  const handleSaveUser = async (updatedUser: User) => {\r\n    try {\r\n      // Llama a tu servicio de actualización\r\n      const result = await updateUser(updatedUser._id, updatedUser);\r\n      \r\n      // Actualiza la lista de usuarios\r\n      setUsers(users.map(user => \r\n        user._id === updatedUser._id ? updatedUser : user\r\n      ));\r\n    } catch (error) {\r\n      console.error('Error al actualizar usuario:', error);\r\n    }\r\n  };\r\n  // Handler para crear un nuevo usuario\r\n  const handleCreateUser = async (newUserData: Partial<User>) => {\r\n  try {\r\n    // Verifica campos obligatorios\r\n    if (!newUserData.name || !newUserData.email || !newUserData.password) {\r\n      throw new Error('Nombre, email y contraseña son campos requeridos');\r\n    }\r\n    \r\n    // Crea un objeto que cumpla con la interfaz NewUser\r\n    const userToCreate = {\r\n      name: newUserData.name,\r\n      email: newUserData.email,\r\n      password: newUserData.password,\r\n      role: newUserData.role || 'Miembro de equipo', // Valor por defecto\r\n      isActive: newUserData.isActive !== undefined ? newUserData.isActive : true,\r\n      profilePicture: newUserData.profilePicture || 'default-profile.png',\r\n      notifications: newUserData.notifications !== undefined ? newUserData.notifications : true,\r\n      theme: newUserData.theme || 'system',\r\n      readOnly: newUserData.readOnly || false,\r\n      auditLogAccess: newUserData.auditLogAccess || false\r\n    };\r\n    \r\n    // Usa aserción de tipo para cumplir con NewUser\r\n    const newUser = await createUserAdmin(userToCreate as NewUser);\r\n    \r\n    setUsers([...users, newUser]);\r\n    setIsCreateModalOpen(false);\r\n  } catch (error) {\r\n    console.error('Error al crear usuario:', error);\r\n    alert(error);\r\n  }\r\n};\r\n\r\n  // Columnas de la tabla\r\n  const userColumns = [\r\n  { key: 'name', header: 'Nombre', width: 'w-1/4' },\r\n  { key: 'email', header: 'Email', width: 'w-1/4' },\r\n  { key: 'role', header: 'Rol', width: 'w-1/4' },\r\n  { \r\n    key: 'isActive', \r\n    header: 'Estado', \r\n    width: 'w-1/4',\r\n    // Añade la función render aquí\r\n    render: (value: any) => {\r\n      // Convierte cualquier valor a booleano\r\n      const isActive = value === true || value === 'true' || value === 1;\r\n      \r\n      return (\r\n        <span className={`px-2 py-1 rounded-full text-xs ${\r\n          isActive ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'\r\n        }`}>\r\n          {isActive ? 'Activo' : 'Inactivo'}\r\n        </span>\r\n      );\r\n    }\r\n  },\r\n];\r\n\r\n  return (\r\n    <div className=\"flex flex-row min-h-screen\">\r\n      {/* Contenido principal */}\r\n      <div className=\"flex-1 p-8 bg-gray-50\">\r\n        <div className=\"mb-6 flex justify-between items-center\">\r\n          <h1 className=\"text-2xl font-bold text-gray-800\">Gestión de Usuarios</h1>\r\n          <button \r\n            onClick={() => setIsCreateModalOpen(true)} // Abrir modal de creación\r\n            className=\"bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700\"\r\n          >\r\n            + Nuevo Usuario\r\n          </button>\r\n        </div>\r\n\r\n        {/* DataTable */}\r\n        <div className=\"bg-white rounded-lg shadow overflow-hidden\">\r\n          <DataTable\r\n            columns={userColumns}\r\n            data={users}\r\n            onEdit={(id) => {\r\n              const userToEdit = users.find(user => user._id === id);\r\n              if (userToEdit) setEditingUser(userToEdit);\r\n            }}\r\n            onDelete={handleDelete}\r\n            isLoading={isLoading}\r\n          />\r\n        </div>\r\n\r\n        {/* Modal de edición */}\r\n        {editingUser && (\r\n          <EditUserModal\r\n            user={editingUser}\r\n            onClose={() => setEditingUser(null)}\r\n            onSave={handleSaveUser}\r\n          />\r\n        )}\r\n        {/*Modal de creación*/}\r\n      {isCreateModalOpen && (\r\n        <CreateUserModal\r\n          onClose={() => setIsCreateModalOpen(false)}\r\n          onCreate={handleCreateUser}\r\n        />\r\n      )}\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"names":[],"mappings":"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","debugId":null}}]
}